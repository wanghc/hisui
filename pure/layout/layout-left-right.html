<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>布局查询</title>
    <script type="text/javascript">
        var HISUIStyleCode = 'pure';
    </script>
    <link rel="stylesheet" type="text/css" href="../../dist/css/hisui.pure.min.css"></link>
    <script type="text/javascript" src="../../dist/js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="../jquery-tag-demo.js"></script>
    <script type="text/javascript" src="../../dist/js/jquery.hisui.min.js"></script>
    <script type="text/javascript" src="../../dist/js/locale/hisui-lang-zh_CN.js"></script>	
    <script type="text/javascript" src="../mock-min.js"></script>
    <link rel="stylesheet" type="text/css" href="../demo.css">
    

    <style>
        td.l-value{
            text-align: left;
            padding-right: 20px;
        }
        body {
            background-color: #cde6ff;
        }
        .layout-panel-north.panel .panel-body.panel-body-noborder{
            border-top-left-radius: 0px;
            border-top-right-radius: 0px;
        }
    </style>
    <script src="../jquery-tag-demo.js" type="text/javascript"></script>

    <script src="../mock-min.js" type="text/javascript"></script>
    <script src="../tpl/data.js" type="text/javascript"></script>
</head>
<body class="hisui-layout" style="padding-top: 10px;box-sizing: border-box;">
    <div data-options="region:'west',border:false,isNormalPadding:true" style="padding: 0;width: 850px;">
        <div class="hisui-panel" data-options="fit:true,title:'左侧面板',iconCls:'icon-panel-brand'"></div>
    </div> <!--end layout-north-->
    <div data-options="region:'center',border:true">
        <table id="tbl-main"></table>
    </div> <!--end layout-center-->

    <script type="text/javascript">
        $(function(){
            var myTblMainData=[]
            for(var i=1;i<156;i++){
                myTblMainData.push({
                    name:'测试'+i,
                    content:'三级医师未填写备注('+i+')',
                    date:'2017.08.29',
                    time:'10:27:09 AM',
                    doctor:'闫静东',
                    condition:'条件内容',
                    date2:'2017.08.29',
                    time2:'10:27:09'
                })
            }
            Mock.mock("getTblMainData", function( options ){
                console.log("getTblMainData请求开始了",options);
                var obj=getData(options,myTblMainData);
                console.log("getTblMainData请求结束了，结果",obj);
                return obj;

            })

            $('#arg2').combobox({width:200,data:allLoc,valueField:'HIDDEN',textField:'Description'})
            $('#arg3').combobox({width:200,data:allGroup,valueField:'HIDDEN',textField:'Description'})
            $('#arg6').combobox({width:200,data:allUser,valueField:'HIDDEN',textField:'Description'})
            $('#arg7').combobox({width:200,data:allLoc,valueField:'HIDDEN',textField:'Description'})

            $('#tbl-main').datagrid({
                iconCls:'icon-panel-brand',
                title:'右侧面板',
                border:false,
                fit:true,
                fitColumns:true,
                rownumbers:true,
		        striped:true,
                frozenColumns:[[
                    {field:'ck',checkbox:true,width:50},
                    {field:'op',title:'操作',formatter:function(val,row,ind){
                        return '<a class="tbl-main-cell-op" href="javascript:void(0);" data-op="op1" data-ind="'+ind+'" iconCls="icon-copy" title="复制"></a>'+
                        '<a class="tbl-main-cell-op" href="javascript:void(0);" data-op="op2" data-ind="'+ind+'" iconCls="icon-cancel" title="删除"></a>';
                    },width:100,align:'center'}
                ]],
                columns:[[
                    
                    {field:'name',title:'姓名',width:100},
                    {field:'content',title:'质控消息内容',width:300},
                    {field:'date',title:'质控日期',width:180,formatter:function(val,row,ind){
                        return val+' '+row['time']
                    }},
                    {field:'doctor',title:'质控医师',width:100},
                    {field:'condition',title:'条件',width:100},
                    {field:'date2',title:'质控日期',width:180,formatter:function(val,row,ind){
                        return row['date']+' '+row['time']
                    }}
                ]],
                url:'getTblMainData', //采用mockjs 模拟数据
                onLoadSuccess:function(){
                    $('.tbl-main-cell-op').off('click').on('click',function(){
                        var op=$(this).data('op');
                        var ind=$(this).data('ind');
                        var row= $('#tbl-main').datagrid('getRows')[ind];
                        $.messager.popover({msg:'点击了'+(ind+1)+'行的'+op+'按钮' ,type:'info' })

                    })
                    $('.tbl-main-cell-op').linkbutton({plain:true}).tooltip({position:'bottom'})
                },
                pagination: true,pageSize:20
                                    
            })

        })

    </script>
</body>
</html>